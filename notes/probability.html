<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Theo POMIES">
<meta name="dcterms.date" content="2025-09-02">
<meta name="description" content="Small Probability, Statistics &amp; Information Theory cheatsheet.">

<title>Probability, Statistics and Information Theory – Theo Pomies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2a833b3b0b26eee7022ba723d34efb31.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-2a833b3b0b26eee7022ba723d34efb31.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-72d1e8b689827015b54a19b7d884d8e5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-48b0f5cac707ebf15bd23324e309892c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="Probability, Statistics and Information Theory – Theo Pomies">
<meta name="twitter:description" content="Small Probability, Statistics &amp; Information Theory cheatsheet.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const queryPrefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const darkModeDefault = queryPrefersDark.matches;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    queryPrefersDark.addEventListener("change", e => {
      if(window.localStorage.getItem("quarto-color-scheme") !== null)
        return;
      const alternate = e.matches
      toggleColorMode(alternate);
      localAlternateSentinel = e.matches ? 'alternate' : 'default'; // this is used alongside local storage!
      toggleGiscusIfUsed(alternate, darkModeDefault);
    });
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">about me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../posts/index.html"> 
<span class="menu-text">posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../notes/index.html"> 
<span class="menu-text">notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../journal/index.html"> 
<span class="menu-text">journal</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://x.com/theopomies" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-twitter-x"></i></a>
    <a href="https://github.com/theopomies" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/theopomies/" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-linkedin"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#definitions-formulas" id="toc-definitions-formulas" class="nav-link active" data-scroll-target="#definitions-formulas">Definitions &amp; Formulas</a>
  <ul class="collapse">
  <li><a href="#outcomes-and-events" id="toc-outcomes-and-events" class="nav-link" data-scroll-target="#outcomes-and-events">Outcomes and Events</a></li>
  <li><a href="#probability-function" id="toc-probability-function" class="nav-link" data-scroll-target="#probability-function">Probability function</a></li>
  <li><a href="#sec-random-variables" id="toc-sec-random-variables" class="nav-link" data-scroll-target="#sec-random-variables">Random Variables</a></li>
  <li><a href="#sec-bayes-theorem" id="toc-sec-bayes-theorem" class="nav-link" data-scroll-target="#sec-bayes-theorem">Bayes’ Theorem</a></li>
  <li><a href="#expectation" id="toc-expectation" class="nav-link" data-scroll-target="#expectation">Expectation</a></li>
  <li><a href="#sec-variance" id="toc-sec-variance" class="nav-link" data-scroll-target="#sec-variance">Variance</a></li>
  <li><a href="#standard-deviation" id="toc-standard-deviation" class="nav-link" data-scroll-target="#standard-deviation">Standard deviation</a></li>
  <li><a href="#sec-covariance" id="toc-sec-covariance" class="nav-link" data-scroll-target="#sec-covariance">Covariance</a></li>
  <li><a href="#maximum-likelihood-and-negative-log-likelihood" id="toc-maximum-likelihood-and-negative-log-likelihood" class="nav-link" data-scroll-target="#maximum-likelihood-and-negative-log-likelihood">Maximum Likelihood (and Negative Log-Likelihood)</a></li>
  </ul></li>
  <li><a href="#proofs" id="toc-proofs" class="nav-link" data-scroll-target="#proofs">Proofs</a></li>
  <li><a href="#notation" id="toc-notation" class="nav-link" data-scroll-target="#notation">Notation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Probability, Statistics and Information Theory</h1>
  <div class="quarto-categories">
    <div class="quarto-category">math</div>
  </div>
  </div>

<div>
  <div class="description">
    Small Probability, Statistics &amp; Information Theory cheatsheet.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Theo POMIES </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 2, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 30, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="definitions-formulas" class="level2">
<h2 class="anchored" data-anchor-id="definitions-formulas">Definitions &amp; Formulas</h2>
<section id="outcomes-and-events" class="level3">
<h3 class="anchored" data-anchor-id="outcomes-and-events">Outcomes and Events</h3>
<p>When studying probability, we are performing experiments, random trials or observations. The set of all possible <em>outcomes</em> of this experiment is <span class="math inline">\(\mathcal{\Omega}\)</span> (or <span class="math inline">\(\mathcal{S}\)</span>). eg. When rolling a die, <span class="math inline">\(\mathcal{\Omega} = \{1,2,3,4,5,6\}\)</span>.</p>
<p>We can group these outcomes into <em>events</em> — <span class="math inline">\(\mathcal{E} \subseteq \mathcal{\Omega}\)</span>. eg. The event <span class="math inline">\(\mathcal{E} = \{\)</span>die shows an even number<span class="math inline">\(\} = \{2, 4, 6\}\)</span>. Whenever the outcome <span class="math inline">\(z\)</span> of the random experiment satisfies <span class="math inline">\(z \in \mathcal{E}\)</span>, the event <span class="math inline">\(\mathcal{E}\)</span> has occurred. Multiple events can occur from the same outcome, say we have <span class="math inline">\(\mathcal{A} = \{3, 6\}\)</span> “the result is divisible by 3” and <span class="math inline">\(\mathcal{B} = \{2, 4, 6\}\)</span>. <span class="math inline">\(z = 6\)</span> satisfies both <span class="math inline">\(\mathcal{A}\)</span> and <span class="math inline">\(\mathcal{B}\)</span>.</p>
</section>
<section id="probability-function" class="level3">
<h3 class="anchored" data-anchor-id="probability-function">Probability function</h3>
<p>The <strong>probability function</strong> maps events onto a real value <span class="math inline">\(P\colon \mathcal{E} \subseteq \mathcal{\Omega} \to [0, 1]\)</span>.</p>
<p><span class="math inline">\(\operatorname{P}(\mathcal{E})\)</span> is the <em>probability associated with event <span class="math inline">\(\mathcal{E}\)</span></em>.</p>
<section id="properties" class="level4">
<h4 class="anchored" data-anchor-id="properties">Properties</h4>
<ul>
<li><span class="math inline">\(\operatorname{P}(\mathcal{E}) \geq 0\)</span></li>
<li><span class="math inline">\(\operatorname{P}(\mathcal{\Omega}) = 1, \operatorname{P}(\mathcal{\emptyset}) = 0\)</span></li>
<li><span class="math inline">\(\operatorname{P}(\mathcal{A} \cup \mathcal{B}) = \operatorname{P}(\mathcal{A}) + \operatorname{P}(\mathcal{B}) - \operatorname{P}(\mathcal{A} \cap \mathcal{B})\)</span></li>
<li><span class="math inline">\(\operatorname{P}(\bigcup_{i=1}^{\infty} \mathcal{A}_i) = \sum_{i=1}^{\infty} \operatorname{P}(\mathcal{A}_i), \quad \mathcal{A}_i \cap \mathcal{A}_j = \emptyset\: \text{for all}\: i \neq j\)</span> (= if all events <span class="math inline">\(\mathcal{A}_i\)</span> are <em>mutually exclusive</em>)</li>
<li><span class="math inline">\(\operatorname{P}(\mathcal{A} \cap \mathcal{B}) = \operatorname{P}(\mathcal{A} \mid \mathcal{B})\operatorname{P}(\mathcal{B})\)</span></li>
<li><span class="math inline">\(\operatorname{P}(\mathcal{A} \cap \mathcal{B}) = \operatorname{P}(\mathcal{A})\operatorname{P}(\mathcal{B}) \iff \mathcal{A} \perp \mathcal{B}\)</span> (eg. 2 fair dice rolls)</li>
<li><span class="math inline">\(\mathcal{A} \perp \mathcal{B} \iff \operatorname{P}(\mathcal{A} \mid \mathcal{B}) = \operatorname{P}(\mathcal{A})\)</span></li>
</ul>
</section>
</section>
<section id="sec-random-variables" class="level3">
<h3 class="anchored" data-anchor-id="sec-random-variables">Random Variables</h3>
<p>A <strong>random variable</strong> <span class="math inline">\(X\)</span> is a measurable function (mapping) <span class="math inline">\(X \colon \mathcal{\Omega} \to \mathcal{E}\)</span> from a sample space <span class="math inline">\(\mathcal{\Omega}\)</span> as a set of possible outcomes to a measurable space <span class="math inline">\(\mathcal{E}\)</span>.</p>
<p>The probability that <span class="math inline">\(X\)</span> takes on a value in a measurable set <span class="math inline">\(\mathcal{S} \in \mathcal{E}\)</span> is written as <span class="math display">\[
\operatorname{P}(X \in \mathcal{S}) = \operatorname{P}(\{\omega \in \mathcal{\Omega} \mid X(\omega) \in \mathcal{S}\})
\]</span></p>
<p>The probability that <span class="math inline">\(X\)</span> takes a <em>discrete</em> value <span class="math inline">\(v\)</span>, denoted <span class="math inline">\(X = v\)</span>, is <span class="math inline">\(\operatorname{P}(X=v)\)</span>.</p>
<p>Expressions like <span class="math inline">\(X = v\)</span> or <span class="math inline">\(X \geq v\)</span> define <strong>events</strong>, i.e., subsets of <span class="math inline">\(\Omega\)</span> whose probability can be measured.</p>
<p>Random variables allow us to go from outcomes to values, like <span class="math inline">\(X(\omega) = \omega\)</span>, the random variable that associates to each die its value (identity function). This is also an example of a <em>discrete</em> random variable.</p>
<p>When <span class="math inline">\(X\)</span> is <em>continuous</em>, it doesn’t make sense to have events like <span class="math inline">\(X = v\)</span> (and <span class="math inline">\(\operatorname{P}(X = v) = 0\)</span>); rather we use <span class="math inline">\(v \leq X \leq w\)</span> and probability <strong>densities</strong>. An example would be the height of a population. Probabilities are described via a <strong>probability density function</strong> <span class="math inline">\(p_X(x)\)</span>, with <span class="math display">\[
\operatorname{P}(v \le X \le w) = \int_v^w p_X(x)\,dx
\]</span></p>
<p>We denote the probability distribution of <span class="math inline">\(X\)</span> as <span class="math inline">\(\operatorname{P}(X)\)</span> (strictly speaking <span class="math inline">\(P_X\)</span>, but we often write <span class="math inline">\(P(X)\)</span> for convenience).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When the measurable space <span class="math inline">\(\mathcal{E}\)</span> is multi-dimensional, like <span class="math inline">\(\mathbb{R}^m\)</span>, we call the random variable <span class="math inline">\(\mathbf{X} \in \mathbb{R}^m\)</span> a <strong>random vector</strong>.</p>
</div>
</div>
<section id="multiple-random-variables" class="level4">
<h4 class="anchored" data-anchor-id="multiple-random-variables">Multiple Random Variables</h4>
<p><span class="math inline">\(\operatorname{P}(A = a, B = b)\)</span> is the <strong>joint probability</strong> of <span class="math inline">\(A = a\)</span> <strong>and</strong> <span class="math inline">\(B = b\)</span> (it’s the intersection of the events <span class="math inline">\(A = a\)</span> and <span class="math inline">\(B = b\)</span>). Equivalently it’s <span class="math inline">\(\operatorname{P}(\{A = a\} \cap \{B = b\})\)</span>, with an overloaded notation, the <strong>joint probability distribution</strong> becomes <span class="math inline">\(\operatorname{P}(A, B)\)</span></p>
<p>Obviously <span class="math display">\[ \operatorname{P}(A = a, B = b) \leq \operatorname{P}(A=a) \quad \text{and} \quad \operatorname{P}(A = a, B = b) \leq \operatorname{P}(B=b) \]</span></p>
<p>Also, we can <strong>marginalize</strong> <span class="math display">\[ \operatorname{P}(A = a) = \sum_v \operatorname{P}(A = a, B = v) \]</span></p>
<p>Because <span class="math inline">\(A = a\)</span> and <span class="math inline">\(B = b\)</span> are events, <span class="math display">\[\begin{aligned}
\operatorname{P}(A = a, B = b) &amp; = \operatorname{P}(A = a \mid B = b)\operatorname{P}(B = b) \\
\iff \operatorname{P}(A = a \mid B = b) &amp; = \operatorname{P}(A = a, B = b)/\operatorname{P}(B = b)
\end{aligned}\]</span></p>
</section>
</section>
<section id="sec-bayes-theorem" class="level3">
<h3 class="anchored" data-anchor-id="sec-bayes-theorem">Bayes’ Theorem</h3>
<p>From the properties and definitions above, we can derive the following formula</p>
<p><span class="math display">\[ \overbrace{\operatorname{P}(A \mid B)}^{\text{posterior probability}} = \dfrac{\overbrace{\operatorname{P}(B \mid A)}^{\text{likelihood}}\overbrace{\operatorname{P}(A)}^{\text{prior}}}{\underbrace{\operatorname{P}(B)}_{\text{observation}}} \]</span></p>
<ul>
<li>prior/hypothesis: our estimate or current belief about the probability of <span class="math inline">\(A\)</span></li>
<li>observation/marginal likelihood/evidence: the evidence or observations we’ve made regarding <span class="math inline">\(B\)</span></li>
<li>likelihood: a measure of how compatible our hypothesis is with our observation</li>
</ul>
<p>A simplified version is <span class="math inline">\(\operatorname{P}(A \mid B) \propto \operatorname{P}(B \mid A)\operatorname{P}(A)\)</span></p>
</section>
<section id="expectation" class="level3">
<h3 class="anchored" data-anchor-id="expectation">Expectation</h3>
<p>The <strong>expectation</strong> (or <strong>expected value</strong>) is the weighted average of the values of <span class="math inline">\(X\)</span>.</p>
<p>Discrete case:</p>
<p><span class="math display">\[ \operatorname{E}[X] = \operatorname{E}_{X \sim P}[X] = \sum_x x\operatorname{P}(X=x) \]</span></p>
<p>Continuous case:</p>
<p><span class="math display">\[\operatorname{E}[X] = \int_{-\infty}^{\infty} x p(x) \;dx \]</span></p>
<p>To follow mathematical notation, sometimes we use <span class="math inline">\(\mu\)</span> to denote this average.</p>
<section id="sec-expectation-properties" class="level4">
<h4 class="anchored" data-anchor-id="sec-expectation-properties">Properties</h4>
<ul>
<li>Linearity: <span class="math inline">\(\operatorname{E}[\alpha A + B] = \alpha \operatorname{E}[A] + \operatorname{E}[B]\)</span></li>
<li>Equality: <span class="math inline">\(X = Y \; \text{a.s.} \implies \operatorname{E}[X] = \operatorname{E}[Y]\)</span></li>
<li>Constants: <span class="math inline">\(X = c \implies \operatorname{E}[X] = c\)</span></li>
<li>Tower property: <span class="math inline">\(\operatorname{E}[\operatorname{E}[X]] = \operatorname{E}[X]\)</span></li>
</ul>
</section>
<section id="expectation-of-a-random-vector" class="level4">
<h4 class="anchored" data-anchor-id="expectation-of-a-random-vector">Expectation of a Random Vector</h4>
<p>For a vector-valued random variable — ie. the <strong>random vector</strong> <span class="math inline">\(\mathbf{X} \in \mathbb{R}^n\)</span>, we have <span class="math inline">\(\mathbf{\mu} = \operatorname{E}_{\mathbf{X} \sim P}[\mathbf{X}]\)</span> with <span class="math inline">\(\mu_i = \operatorname{E}_{\mathbf{X} \sim P}[x_i]\)</span> — the expectation of <span class="math inline">\(\mathbf{X}\)</span> is a vector of the expectations of each element <span class="math inline">\(x_i\)</span> of <span class="math inline">\(\mathbf{X}\)</span>.</p>
</section>
</section>
<section id="sec-variance" class="level3">
<h3 class="anchored" data-anchor-id="sec-variance">Variance</h3>
<p>The <strong>variance</strong> is a measure of dispersion, it quantifies <em>how much values deviate from their expectation, on average</em>. The variance is the expectation of the squared difference between the values and the expected value.</p>
<p><span class="math display">\[ \operatorname{Var}(X) = \operatorname{E}[(X - \operatorname{E}[X])^2] = \operatorname{E}[X^2] - (\operatorname{E}[X])^2 \]</span></p>
<p>Because</p>
<p><span class="math display">\[ \operatorname{E}[X^2 - 2X\operatorname{E}[X] + \operatorname{E}[X]^2] = \operatorname{E}[X^2] - 2(\operatorname{E}[X])^2 + (\operatorname{E}[X])^2 \]</span></p>
<section id="sec-var-random-vector" class="level4">
<h4 class="anchored" data-anchor-id="sec-var-random-vector">Variance of a Random Vector</h4>
<p>For a random vector <span class="math inline">\(\mathbf{X}\)</span>, we store the pairwise <strong>variances</strong> of elements and <strong><a href="#sec-covariance" class="quarto-xref">covariances</a></strong> in a <strong><a href="#sec-covariance-matrix" class="quarto-xref">covariance matrix</a></strong> (aka. auto-covariance matrix or variance matrix) noted <span class="math inline">\(\mathbf{\Sigma}\)</span> or <span class="math inline">\(K_{\mathbf{x}\mathbf{x}}\)</span> or <span class="math inline">\(\operatorname{Cov}_{\mathbf{x} \sim P}\)</span>, defined as</p>
<p><span class="math display">\[ \mathbf{\Sigma} = \operatorname{E}_{\mathbf{X} \sim P}[(\mathbf{X} - \mathbf{\mu})(\mathbf{X} - \mathbf{\mu})^\top] \]</span> <span class="math display">\[\begin{aligned}
\mathbf{\Sigma} = K_{\mathbf{X}\mathbf{Y}}
&amp; = \operatorname{E}_{\mathbf{X} \sim P}[(\mathbf{X} - \mathbf{\mu})(\mathbf{X} - \mathbf{\mu})^\top] \\
&amp; = \operatorname{E}[\mathbf{X}\mathbf{X}^\top] - \operatorname{E}[\mathbf{X}]\operatorname{E}[\mathbf{X}]^\top
\end{aligned}\]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Each entry <span class="math inline">\(\Sigma_{i, j} = \operatorname{Cov}(X_i, X_j)\)</span> — see <a href="#sec-covariance" class="quarto-xref">covariance</a>), and by definition, for diagonal entries <span class="math inline">\(\Sigma_{i, i} = \operatorname{Cov}(X_i, X_i) = \operatorname{Var}(X_i)\)</span></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We have the following property when applying a linear transformation represented by the appropriately dimensioned matrix <span class="math inline">\(\mathbf{A}\)</span></p>
<p><span class="math display">\[
\begin{aligned}
\operatorname{Cov}(\mathbf{AX}, \mathbf{AX}) &amp; = \operatorname{E}[(\mathbf{AX} - \operatorname{E}[\mathbf{AX}])(\mathbf{AX} - \operatorname{E}[\mathbf{AX}])^\top] \\
&amp; = \operatorname{E}[\mathbf{AX}(\mathbf{AX})^\top] - \operatorname{E}[\mathbf{AX}]\operatorname{E}[(\mathbf{AX})^\top] \\
&amp; = \operatorname{E}[\mathbf{AX}\mathbf{X}^\top\mathbf{A}^\top] - \operatorname{E}[\mathbf{AX}]\operatorname{E}[\mathbf{X}^\top\mathbf{A}^\top] \\
&amp; = \mathbf{A}\operatorname{E}[\mathbf{X}\mathbf{X}^\top]\mathbf{A}^\top - \mathbf{A}\operatorname{E}[\mathbf{X}]\operatorname{E}[\mathbf{X}^\top]\mathbf{A}^\top \\
&amp; = \mathbf{A}(\operatorname{E}[\mathbf{X}\mathbf{X}^\top] - \operatorname{E}[\mathbf{X}]\operatorname{E}[\mathbf{X}^\top])\mathbf{A}^\top \\
&amp; = \mathbf{A}\mathbf{\Sigma}\mathbf{A}^\top
\end{aligned}
\]</span></p>
<p>As a result of the <a href="#sec-expectation-properties" class="quarto-xref">linearity of expectation</a></p>
</div>
</div>
</section>
</section>
<section id="standard-deviation" class="level3">
<h3 class="anchored" data-anchor-id="standard-deviation">Standard deviation</h3>
<p>Because the <a href="#sec-variance" class="quarto-xref">variance</a> is a squared difference, we can take its square root to get the <strong>standard deviation</strong> which has the benefit of being in the same unit as our random variable.</p>
<p><span class="math display">\[ \operatorname{Var}(X) = \sigma^2_X \iff \sigma_X = \sqrt{\operatorname{Var}(X)} \]</span></p>
</section>
<section id="sec-covariance" class="level3">
<h3 class="anchored" data-anchor-id="sec-covariance">Covariance</h3>
<p><strong>Covariance</strong> is a measure of the joint variability of two <a href="#sec-random-variables" class="quarto-xref">random variables</a>.</p>
<p><span class="math display">\[ \operatorname{Cov}(X, Y) = \operatorname{E}[(X - \operatorname{E}[X])(Y - \operatorname{E}[Y])] \]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math inline">\(\operatorname{Cov}(X, X) = \operatorname{E}[(X - \operatorname{E}[X])^2] = \operatorname{Var}(X)\)</span></p>
</div>
</div>
<section id="sec-covariance-matrix" class="level4">
<h4 class="anchored" data-anchor-id="sec-covariance-matrix">Covariance Matrix of two Random Vectors</h4>
<p>For random vectors <span class="math inline">\(\mathbf{X} \in \mathbb{R}^m\)</span>, <span class="math inline">\(\mathbf{Y} \in \mathbb{R}^n\)</span>, the <strong>covariance matrix</strong> is a matrix <span class="math inline">\(K_{\mathbf{X}\mathbf{Y}}\)</span> defined as</p>
<p><span class="math display">\[\begin{aligned}
K_{\mathbf{X}\mathbf{Y}} &amp; = \operatorname{E}[(\mathbf{X} - \operatorname{E}[\mathbf{X}])(\mathbf{Y} - \operatorname{E}[\mathbf{Y}])^\top] \\
&amp; = \operatorname{E}[\mathbf{X}\mathbf{Y}^\top] - \operatorname{E}[\mathbf{X}]\operatorname{E}[\mathbf{Y}]^\top
\end{aligned}\]</span></p>
<p>We have <span class="math inline">\(\operatorname{Cov}(X_i, Y_j) = K_{X_iY_j} = \operatorname{E}[(X_i - \operatorname{E}[X_i])(Y_j - \operatorname{E}[Y_j])]\)</span> found at index <span class="math inline">\((i, j)\)</span> in <span class="math inline">\(K_{\mathbf{X}\mathbf{Y}}\)</span></p>
<p>If <span class="math inline">\(\mathbf{X} = \mathbf{Y}\)</span> this is the <a href="#sec-var-random-vector" class="quarto-xref">auto-covariance matrix or variance matrix</a> of this random vector <span class="math inline">\(\mathbf{X}\)</span></p>
<p>If <span class="math inline">\(\mathbf{X} \neq \mathbf{Y}\)</span> this is the <strong>cross-covariance matrix</strong> of <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathbf{Y}\)</span></p>
<!--- TODO: correlation, KL-Divergence --->
</section>
</section>
<section id="maximum-likelihood-and-negative-log-likelihood" class="level3">
<h3 class="anchored" data-anchor-id="maximum-likelihood-and-negative-log-likelihood">Maximum Likelihood (and Negative Log-Likelihood)</h3>
<p>Considering model parameters <span class="math inline">\(\boldsymbol{\theta}\)</span> and data examples <span class="math inline">\(X\)</span>, the goal of Machine Learning is to find <span class="math inline">\(\boldsymbol{\theta}\)</span> such that <span class="math display">\[\mathop{\mathrm{argmax}} P(\boldsymbol{\theta}\mid X)\]</span></p>
<p>By <a href="#sec-bayes-theorem" class="quarto-xref">Bayes’ theorem</a></p>
<p><span class="math display">\[ \mathop{\mathrm{argmax}} P(\boldsymbol{\theta}\mid X) = \mathop{\mathrm{argmax}} \dfrac{P(X \mid \boldsymbol{\theta})P(\boldsymbol{\theta})}{P(X)} \]</span></p>
<p>However <span class="math inline">\(P(X)\)</span> and <span class="math inline">\(P(\boldsymbol{\theta})\)</span> can be dropped because <span class="math inline">\(P(X)\)</span> is independent on <span class="math inline">\(\boldsymbol{\theta}\)</span>, and we have no prior information or “belief” on the best parameters <span class="math inline">\(\boldsymbol{\theta}\)</span>, so <span class="math inline">\(P(\boldsymbol{\theta})\)</span> uninformative.</p>
<p>Hence, our best parameter estimation is the argument <span class="math inline">\(\boldsymbol{\theta}\)</span> maximizing the likelihood (probability of seeing data <span class="math inline">\(X\)</span> knowing parameters <span class="math inline">\(\boldsymbol{\theta}\)</span>):</p>
<p><span class="math display">\[ \hat{\boldsymbol{\theta}} = \mathop{\mathrm{argmax}}_{\boldsymbol{\theta}}\, P(\boldsymbol{\theta}\mid X) = \mathop{\mathrm{argmax}}_{\boldsymbol{\theta}}\, P(X \mid \boldsymbol{\theta}) \]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Negative Log-Likelihood
</div>
</div>
<div class="callout-body-container callout-body">
<p>In practice, we often use Negative Log-Likelihood in ML. The Log part comes from numerical stability and transforming products into sums. Imagine computing the likelihood for billions of data points, it would require too much precision for fp32. But the log-likelihood fits easily and precisely.</p>
<p>The negative part comes from loss/cost functions, which we want to minimize, not maximize. Because log is continuous and increasing we can transform the maximization problem into a minimization one by taking <span class="math inline">\(-P(X \mid \boldsymbol{\theta})\)</span>.</p>
</div>
</div>
</section>
</section>
<section id="proofs" class="level2">
<h2 class="anchored" data-anchor-id="proofs">Proofs</h2>
<p>Later!</p>
</section>
<section id="notation" class="level2">
<h2 class="anchored" data-anchor-id="notation">Notation</h2>
<ul>
<li><span class="math inline">\(\mathcal{X}\)</span>: a set</li>
<li><span class="math inline">\(\{a, b, c\}\)</span>: a set, with its elements</li>
<li><span class="math inline">\(\emptyset\)</span>: the empty set</li>
<li><span class="math inline">\(\mathcal{A} \subset \mathcal{B}\)</span>, <span class="math inline">\(\mathcal{A} \subsetneq \mathcal{B}\)</span>: <span class="math inline">\(\mathcal{A}\)</span> is a proper/strict subset of <span class="math inline">\(\mathcal{B}\)</span></li>
<li><span class="math inline">\(\mathcal{A} \subseteq \mathcal{B}\)</span>: <span class="math inline">\(\mathcal{A}\)</span> is a subest of <span class="math inline">\(\mathcal{B}\)</span></li>
<li><span class="math inline">\(\mathcal{A} \cap \mathcal{B}\)</span>: the intersection of sets <span class="math inline">\(\mathcal{A}\)</span> and <span class="math inline">\(\mathcal{B}\)</span> — “<span class="math inline">\(\mathcal{A}\)</span> <strong>and</strong> <span class="math inline">\(\mathcal{B}\)</span>”</li>
<li><span class="math inline">\(\mathcal{A} \cup \mathcal{B}\)</span>: the union of sets <span class="math inline">\(\mathcal{A}\)</span> and <span class="math inline">\(\mathcal{B}\)</span> — “<span class="math inline">\(\mathcal{A}\)</span> <strong>or</strong> <span class="math inline">\(\mathcal{B}\)</span>”</li>
<li><span class="math inline">\(\mathcal{A} \setminus \mathcal{B}\)</span>: set subtraction of <span class="math inline">\(\mathcal{B}\)</span> from <span class="math inline">\(\mathcal{A}\)</span>, elements from <span class="math inline">\(\mathcal{A}\)</span> but not in <span class="math inline">\(\mathcal{B}\)</span></li>
<li><span class="math inline">\(\mathcal{S}\)</span>, <span class="math inline">\(\mathcal{\Omega}\)</span>: the sample space / universe (the set of all possible outcomes)</li>
<li><span class="math inline">\(|\mathcal{X}|\)</span>: the cardinality of set <span class="math inline">\(\mathcal{X}\)</span> (its number of events)</li>
<li><span class="math inline">\(X\)</span>: a random variable</li>
<li><span class="math inline">\(\mathbf{X}\)</span>: a random vector</li>
<li><span class="math inline">\(P\)</span>: a probability distribution</li>
<li><span class="math inline">\(X \sim P\)</span>: the random variable <span class="math inline">\(X\)</span> follows the probability distribution <span class="math inline">\(P\)</span></li>
<li><span class="math inline">\(a \propto b\)</span>: <span class="math inline">\(a\)</span> is proportional to <span class="math inline">\(b\)</span>, eg. <span class="math inline">\(a = kb\)</span></li>
<li><span class="math inline">\(\operatorname{P}(\cdot)\)</span>: the probability function, maps events to their probability and random variables to their probability <em>distributions</em></li>
<li><span class="math inline">\(\operatorname{P}(X)\)</span>: depending on the context, a probability distribution <em>or</em> the probability of any <span class="math inline">\(X=x\)</span>, meaning the formula is true for any value</li>
<li><span class="math inline">\(\operatorname{P}(X=x)\)</span>: the probability assigned to the event where random variable <span class="math inline">\(X\)</span> takes value <span class="math inline">\(x\)</span></li>
<li><span class="math inline">\(\operatorname{P}(X \mid Y)\)</span>: the conditional probability distribution of <span class="math inline">\(X\)</span> given <span class="math inline">\(Y\)</span></li>
<li><span class="math inline">\(\operatorname{p}(\cdot)\)</span>: a probability density function (PDF) associated with distribution <span class="math inline">\(P\)</span></li>
<li><span class="math inline">\(\operatorname{E}[X]\)</span>: expectation of a random variable <span class="math inline">\(X\)</span></li>
<li><span class="math inline">\(X \perp Y\)</span>: random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent</li>
<li><span class="math inline">\(X \perp Y \mid Z\)</span>: random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are conditionally independent given <span class="math inline">\(Z\)</span></li>
<li><span class="math inline">\(\sigma_X\)</span>: standard deviation of random variable <span class="math inline">\(X\)</span></li>
<li><span class="math inline">\(\operatorname{Var}(X)\)</span>: variance of random variable <span class="math inline">\(X\)</span>, equal to <span class="math inline">\(\sigma^2_X\)</span></li>
<li><span class="math inline">\(\operatorname{Cov}(X, Y)\)</span>: covariance of random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></li>
<li><span class="math inline">\(\operatorname{\rho}(X, Y)\)</span>: the Pearson correlation coefficient between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, equals <span class="math inline">\(\frac{\operatorname{Cov}(X, Y)}{\sigma_X \sigma_Y}\)</span></li>
<li><span class="math inline">\(\operatorname{H}(X)\)</span>: entropy of random variable <span class="math inline">\(X\)</span></li>
<li><span class="math inline">\(D_{\operatorname{KL}}(P\|Q)\)</span>: the KL-divergence (or relative entropy) from distribution <span class="math inline">\(Q\)</span> to distribution <span class="math inline">\(P\)</span></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/theopomies\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>